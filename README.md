# Node.js REST API

A Node.js REST API simulating a contact. Follow these steps to get the project up and running on your local machine:

## Installation

1. Clone the project from this repository

    `git clone https://github.com/kamaunelson14/node-rest-api.git`

2. Navigate to the project directory

    `cd node-rest-api`

3. Set up environmental variables

    Rename the `.env.example` file to `.env` and add the following

    ```
    NODE_ENV = development
    PORT = 3000
    MONGO_URI = your mongodb uri
    JWT_SECRET = 'jwtsecret'
    CRYPTO_SECRET_KEY = 'cryptosecretkey'
    ```
    Note: `CRYPTO_SECRET_KEY` should be exactly 32 characters long

4. Install dependencies

    `npm install`

5. Start the server

    `node app.js`
    
## Usage

With your server up and running, it's time to consume the api. Please note that all contacts routes are protected. You need to generate a bearer token to use with your client. This token is generated by signing up as a user:

1. Send a POST request to `/api/users`. The body of your request should be a JSON object with a `name`, `email`, and `password`

2. The response will be a JSON object with a token. Copy that token and use it as an authorization header for your api client. In Postman, for example, go to the "Authorization" tab, select `Bearer token` in the dropdown list, the paste the token in the input field that appears on the right. 

3. If you ever need another token, login by making a POST request to `/api/users/login`. The body of your request should be a JSON object with an `email` and `password`

## API DOcumentation

The contacts api has five routes:

### `POST /api/contacts`
Creates a new contact.

    #### Request
    - Body: JSON object with contact details (`name`, `phoneNumber`,`address`).
    - Constraints: The name should contain at least one alphabetical letter, be at least 2 and less than 20 characters long

    #### Response
    - Status: 201 Created
    - Body: JSON object with the created contact.

### `GET /api/contacts`
Fetches all contacts.

    #### Response
    - Status: 200 OK
    - Body: JSON array containing all contacts.

### `GET /api/contacts/:id`
Fetches one contact by ID.

    #### Parameters
    - `id` (string): The ID of the contact.

    #### Response
    - Status: 200 OK
    - Body: JSON object with the contact details.

### `PUT /api/contacts/:id`
Updates one contact by ID.

    #### Parameters
    - `id` (string): The ID of the contact, which can be found in the '_id' field of each contact in the database.

    #### Request
    - Body: JSON object with updated contact details.

    #### Response
    - Status: 200 OK
    - Body: JSON object with the updated contact.

### `DELETE /api/contacts/:id`
Deletes one contact by ID.

    #### Parameters
    - `id` (string): The ID of the contact.

    #### Response
    - Status: 200; message: 'Contact deleted'


